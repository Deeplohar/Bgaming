<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game Results - Winning Numbers History</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="global.css">
    <link rel="stylesheet" href="result.css">
    <style>
        /* Utility classes */
        .hidden { display: none !important; }
    </style>
</head>

<body>
    <div class="main-content">
        <div class="box">
            <div class="header-fixed">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h2>Game Results</h2>
                    <button class="back-btn" onclick="window.location.href='welcome.html'">â† Back to Game</button>
                </div>
                <p id="userEmail">Loading...</p>
                <h3>Latest Winning Numbers History</h3>
                <hr>
            </div>
            
            <div class="content-scroll">
                <!-- Current Round Status -->
                <div class="section-card">
                    <h3 class="card-title">Current Round Status</h3>
                    <div class="status-row">
                        <div class="status-item">
                            <span class="status-label">Next Result In:</span>
                            <span class="status-value" id="gameTimer">--:--</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Latest Winning Number:</span>
                            <span class="status-value winning-number" id="currentWinningNum">--</span>
                        </div>
                    </div>
                    <p id="gameStatusText" style="margin-top: 10px; font-style: italic;">Loading game status...</p>
                </div>

                <!-- Winning Numbers History -->
                <div class="section-card">
                    <h3 class="card-title">ğŸ“Š Winning Numbers History</h3>
                    
                    <!-- Filters -->
                    <div class="filters">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="last-10">Last 10</button>
                        <button class="filter-btn" data-filter="last-50">Last 50</button>
                        <button class="filter-btn" data-filter="today">Today</button>
                    </div>
                    
                    <!-- Results Table -->
                    <div class="results-container">
                        <div class="table-header">
                            <div class="col-round">Round #</div>
                            <div class="col-time">Time</div>
                            <div class="col-number">Winning Number</div>
                            <div class="col-result">Result</div>
                        </div>
                        
                        <div class="results-list" id="resultsList">
                            <div class="loading-spinner">Loading results...</div>
                        </div>
                    </div>
                    
                    <!-- Stats -->
                    <div class="stats-container" id="statsContainer">
                        <h4>ğŸ“ˆ Number Statistics</h4>
                        <div class="stats-grid" id="statsGrid">
                            <!-- Stats will be populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Personal Bet History (Only if logged in) -->
                <div class="section-card hidden" id="personalHistorySection">
                    <h3 class="card-title">ğŸ¯ Your Recent Bets</h3>
                    <div class="personal-bets" id="personalBetsList">
                        <!-- Personal bets will be loaded here -->
                    </div>
                </div>

                <!-- Info Section -->
                <div class="section-card info-card">
                    <h3 class="card-title">â„¹ï¸ How it Works</h3>
                    <ul class="info-list">
                        <li>â€¢ Each round lasts <strong>5 minutes</strong></li>
                        <li>â€¢ Winning number is randomly selected from 0-9</li>
                        <li>â€¢ If your bet matches the winning number, you get <strong>10x coins</strong></li>
                        <li>â€¢ Results are updated automatically every 5 minutes</li>
                        <li>â€¢ Game uses secure random number generation</li>
                    </ul>
                </div>

                <button class="play" style="margin-top: 10px;" onclick="window.location.href='welcome.html'">ğŸ® Play Game</button>
            </div>
        </div>
    </div>

    <!-- Firebase and Scripts -->
    <script type="module" src="firebase.js"></script>
    <script type="module" src="result-logic.js"></script>
</body>
</html>